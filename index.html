<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja de SuperCarros IFPR</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h2>Super Carros do IFPR</h2>

  <nav>
    <a href="index.html">Início</a>
    <a href="filiais.html">Filiais</a>
    <a href="contato.html">Contato</a>
    <a href="planilha.html">Planilha</a>
  </nav>

  <!-- Toggle -->
  <div id="tema-toggle" class="tema-toggle">
      <div class="bolinha"></div>
  </div>
</header>

<main>
  <h1>Bem-vindo à Locadora de Super Carros IFPR </h1>
  <p>Encontre o carro ideal para sua diversão, corrida ou lazer.</p>

  <div id="conteudo"></div>
</main>


<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwmXtBIyBNLxmcHbW0XhgWNBLm73Fbjb0FU5f7bOfuR2lUJj3eTBMjPCs0SAQljCDw/exec";

async function carregarConteudo() {
  const container = document.getElementById('conteudo');
  container.innerHTML = "<p>Carregando conteúdo...</p>";

  try {
    const res = await fetch(SCRIPT_URL);
    const dados = await res.json();
    container.innerHTML = "";

    dados.forEach(item => {
      const bloco = document.createElement("div");
      bloco.className = "bloco-item";

      /* Título */
      const titulo = document.createElement("h2");
      titulo.textContent = item.Título || "";
      bloco.appendChild(titulo);

      /* Descrição */
      const descricao = document.createElement("p");
      descricao.textContent = item.Descrição || "";
      bloco.appendChild(descricao);

      /* Conteúdos (imagem / vídeo / link) */
      if (item.Url && item.Url.startsWith("http")) {

        const url = item.Url.trim();

        /* YouTube */
        const yt = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/);
        if (yt) {
          const iframe = document.createElement("iframe");
          iframe.src = `https://www.youtube.com/embed/${yt[1]}`;
          iframe.width = "100%";
          iframe.height = "315";
          iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
          iframe.setAttribute("allowfullscreen", true);
          bloco.appendChild(iframe);
        }

        /* Imagem (Drive, JPG, PNG, Unsplash etc.) */
        else if (
          url.match(/\.(jpg|jpeg|png|gif|webp)$/i) ||
          url.includes("unsplash.com") ||
          url.includes("drive.google.com")
        ) {

          let imgUrl = url;

          /* Converter link do Google Drive */
          if (url.includes("drive.google.com")) {
            const id = url.match(/\/d\/(.*)\//);
            if (id) imgUrl = `https://drive.google.com/uc?export=view&id=${id[1]}`;
          }

          const img = document.createElement("img");
          img.src = imgUrl;
          img.alt = item.Título || "Imagem";
          bloco.appendChild(img);
        }

        /* Caso seja apenas um link */
        else {
          const link = document.createElement("a");
          link.href = url;
          link.textContent = "Acessar conteúdo";
          link.target = "_blank";
          bloco.appendChild(link);
        }
      }

      container.appendChild(bloco);
    });

  } catch (err) {
    container.innerHTML = `<p>Erro ao carregar dados: ${err.message}</p>`;
  }
}


/* ---------- TEMA ESCURO GLOBAL ---------- */
const toggle = document.getElementById("tema-toggle");
const body = document.body;

/* Carregar tema salvo */
let tema = localStorage.getItem("tema") || "tema-claro";
if (tema === "tema-escuro") {
  body.classList.add("tema-escuro");
}

/* Alternar tema */
if (toggle) {
  toggle.addEventListener("click", () => {
    body.classList.toggle("tema-escuro");
    const ativo = body.classList.contains("tema-escuro");
    localStorage.setItem("tema", ativo ? "tema-escuro" : "tema-claro");
  });
}
carregarConteudo();
</script>

<footer>
  <p>&copy; 2025 Locadora IFPR - Todos os direitos reservados</p>
</footer>

</body>
</html>
